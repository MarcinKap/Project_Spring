<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="document/head :: head_section">
</head>
<body>
<!--<body >-->
<div th:replace="document/content :: content_section_title"></div>

<div class="account-page">

    <div class="survey-page">
        <div class="view-account">
            <section class="module">
                <div class="module-inner row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3" style="padding-right: 0">
                        <div th:replace="document/account-menu :: account_menu"></div>
                    </div>

                    <div class="content-panel  col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9">
                        <div class="">
                            <!-- Content wrapper start -->
                            <div class="content-wrapper">

                                <!-- Row start -->
                                <div class="row gutters">

                                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                                        <div class="card m-0">

                                            <!-- Row start -->
                                            <div class="row no-gutters">
                                                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3">
                                                    <div class="users-container">
<!--                                                        <div class="chat-search-box">-->
<!--                                                            <div class="input-group">-->
<!--                                                                <input class="form-control" placeholder="Search">-->
<!--                                                                <div class="input-group-btn">-->
<!--                                                                    <button type="button" class="btn btn-info">-->
<!--                                                                        <i class="fa fa-search"></i>-->
<!--                                                                    </button>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
                                                        <ul class="users">


<!--                                                            -->
                                                            <li th:onclick="'javascript:updateMessagesList(\'' + ${user.getId()} + '\');'"  th:each="user : ${users_list}" class="person" data-chat="person1">

<!--                                                                <a th:href="@{'/account-menu/account-private-messages?friendId=' + ${user.getId()}}">-->
                                                                <a >



                                                                    <div class="user">
                                                                        <img src="https://www.bootdey.com/img/Content/avatar/avatar3.png"
                                                                             alt="Retail Admin">
                                                                        <span class="status busy"></span>
                                                                    </div>
                                                                    <p class="name-time">
                                                                        <span class="name"
                                                                              th:text="${user.getName() +' '+ user.getLastName() + ' ' + user.getEmail()}">Steve Bangalter</span>
                                                                        <!--                                                                    <span class="time">15/02/2019</span>-->
                                                                    </p>
                                                                </a>
                                                            </li>

                                                        </ul>
                                                    </div>
                                                </div>

                                                <div id="showMessages"  class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9"
                                                     style="background: #f4f5fb">
<!--                                                    <div th:if="${param.friendId != null}">-->
                                                    <div  >
                                                        <div th:if="${friend}!=null" class="selected-user">

                                                            <span >To: <span
                                                                    th:text="${friend.getName() + ' ' + friend.getLastName()}"
                                                                    class="name"></span></span>
                                                        </div>
                                                        <div  class="chat-container" th:if="${friend}!=null">
                                                            <ul id="updateMessages"  class="chat-box chatContainerScroll">
                                                                <li th:each="message : ${messages}"
                                                                    th:classappend="${message.getSender().getId() == (current_logged_user.getId())} ? 'chat-right' : 'chat-left'">


                                                                    <div class="chat-avatar">
                                                                        <img src="https://www.bootdey.com/img/Content/avatar/avatar3.png"
                                                                             alt="Retail Admin">
                                                                        <div th:text="${message.getSender().getId() == (current_logged_user.getId())} ? ${current_logged_user.getName()} : ${friend.getName()} "
                                                                             class="chat-name">Russell
                                                                        </div>
                                                                    </div>
                                                                    <!--/*@thymesVar id="getTextMsg" type=""*/-->
                                                                    <div th:text="${message.getTextMsg()}"
                                                                         class="chat-text">
                                                                        <!--                                                                        <br>How can I help you today?-->
                                                                    </div>
                                                                    <div th:text="${#temporals.format(message.getCreatedDate(), 'dd-MM-yyyy HH:mm')}"
                                                                         class="chat-hour"><span
                                                                            class="fa fa-check-circle"></span></div>
                                                                </li>

                                                                <!--                                                                <li class="chat-right">-->
                                                                <!--                                                                    <div class="chat-hour">08:56 <span-->
                                                                <!--                                                                            class="fa fa-check-circle"></span></div>-->
                                                                <!--                                                                    <div class="chat-text">Hi, Russell-->
                                                                <!--                                                                        <br> I need more information about Developer-->
                                                                <!--                                                                        Plan.-->
                                                                <!--                                                                    </div>-->
                                                                <!--                                                                    <div class="chat-avatar">-->
                                                                <!--                                                                        <img src="https://www.bootdey.com/img/Content/avatar/avatar3.png"-->
                                                                <!--                                                                             alt="Retail Admin">-->
                                                                <!--                                                                        <div class="chat-title">Sam</div>-->
                                                                <!--                                                                    </div>-->
                                                                <!--                                                                </li>-->

                                                            </ul>


                                                            <!--                                                        <div class="form-group mt-3 mb-0">-->
                                                            <!--                                                            <textarea class="form-control" rows="3" placeholder="Type your message here..."></textarea>-->
                                                            <!--                                                        </div>-->
                                                            <div class="msb-reply  col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
<!--                                                                th:action="@{/sendMessageToPrivateMessanger}" method="POST"-->
                                                                <div
                                                                      class="row" >
                                                                    <!--                                                                <textarea-->
                                                                    <!--                                                                        placeholder="What's on your mind..."></textarea>-->

                                                                    <textarea type="text" id="text_msg" name="text_msg"
                                                                              rows="1"
                                                                              class="form-control md-textarea  col-xl-11 col-lg-11 col-md-11 col-sm-9 col-9"></textarea>
                                                                    <button th:onclick="'javascript:sendPrivateMessage(\'' + ${friend.getId()} + '\');'"
                                                                            class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                                                                        <i class="fa fa-paper-plane-o"></i></button>

                                                                    <input type="text" name="id_recipient"
                                                                           th:value="${friend.getId()}" hidden/>


                                                                    <!--                                    <input type="text" id="senderEmail" th:value="${senderEmail}" title="senderEmail"-->
                                                                    <!--                                           hidden>-->

                                                                    <!--                                                                                                        <input type="text" title="topicID" th:value="${current_id_message}" hidden/>-->


                                                                    <!--                                                                                                        <button type="submit" class="msg_send_btn"-->
                                                                    <!--                                                                                                                th:classappend="${current_id_message == null ? 'button-disable':''}">-->

                                                                    <!--                                                                                                            <i class="fa fa-paper-plane-o" aria-hidden="true"></i>-->
                                                                    <!--                                                                                                        </button>-->

                                                                </div>


                                                            </div>
                                                        </div>
                                                    </div>



                                                </div>
                                            </div>
                                            <!-- Row end -->
                                        </div>

                                    </div>

                                </div>
                                <!-- Row end -->

                            </div>
                            <!-- Content wrapper end -->

                        </div>
                    </div>


                </div>
            </section>
        </div>
    </div>



</div>


</body>
<footer th:replace="document/footer :: footer_section"></footer>
</html>